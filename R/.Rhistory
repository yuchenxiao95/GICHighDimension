# install if needed
if (!requireNamespace("devtools", quietly = TRUE)) install.packages("devtools")
# 1) Wipe stale files (optional but useful when signatures changed)
unlink("NAMESPACE")         # roxygen will regenerate
unlink("man", recursive=TRUE)
# 2) Rebuild docs + NAMESPACE
devtools::document()        # or roxygen2::roxygenise()
# 3) Inspect the generated NAMESPACE
cat(readLines("NAMESPACE"), sep = "\n")
devtools::install()
if (!requireNamespace("roxygen2", quietly = TRUE))
install.packages("roxygen2")
# Add DESCRIPTION fields (only once)
if (!requireNamespace("usethis", quietly = TRUE)) install.packages("usethis")
usethis::use_roxygen_md()    # adds 'Roxygen: list(markdown = TRUE)' + RoxygenNote
# See if any @export tags exist in R/ files
length(grep("@export", readLines(list.files("R", full.names = TRUE)), fixed = TRUE))
setwd("/Users/yuchen/GICModelSelection")   # <- one level up from .../R
file.exists("DESCRIPTION")                  # should be TRUE
dir.exists("R")                             # should be TRUE
if (!requireNamespace("usethis", quietly = TRUE)) install.packages("usethis")
usethis::proj_set("/Users/yuchen/GICModelSelection", force = TRUE)
if (!requireNamespace("roxygen2", quietly = TRUE)) install.packages("roxygen2")
usethis::use_roxygen_md()   # adds `Roxygen: list(markdown = TRUE)` and RoxygenNote
if (!requireNamespace("roxygen2", quietly = TRUE)) install.packages("roxygen2")
usethis::use_roxygen_md()   # adds `Roxygen: list(markdown = TRUE)` and RoxygenNote
files <- list.files("R", pattern = "\\.[rR]$", full.names = TRUE)
all_lines <- unlist(lapply(files, readLines, warn = FALSE), use.names = FALSE)
sum(grepl("^#'\\s*@export\\b", all_lines))
unlink("NAMESPACE")
unlink("man", recursive = TRUE)
roxygen2::roxygenise(pkg = ".", roclets = c("namespace", "rd"))
devtools::document()
cat(readLines("NAMESPACE"), sep = "\n")
devtools::install()
unlink("NAMESPACE")
unlink("man", recursive = TRUE)
# Preferred:
devtools::document()
# If that errors due to older roxygen2:
library(roxygen2)
roxygenise(".")  # or: roxygenise(package.dir = ".", roclets = c("namespace","rd"))
cat(readLines("man/GICSelection.Rd"), sep = "\n")  # look for \usage with P =
unlink("NAMESPACE"); unlink("man", recursive = TRUE)
roxygen2::roxygenise()   # regenerates Rd + NAMESPACE
devtools::document()
cat(readLines("NAMESPACE"), sep = "\n")
devtools::install()
devtools::document()
unlink("NAMESPACE"); unlink("man", recursive = TRUE)
roxygen2::roxygenise()   # regenerates Rd + NAMESPACE
unlink("NAMESPACE"); unlink("man", recursive = TRUE)
roxygen2::roxygenise()   # regenerates Rd + NAMESPACE
if ("package:GICHighDimension" %in% search())
detach("package:GICHighDimension", unload = TRUE, character.only = TRUE)
unlink("NAMESPACE")
unlink("man", recursive = TRUE)
## 5) Re-generate docs & NAMESPACE from source (no installed copy involved)
if (!requireNamespace("roxygen2", quietly = TRUE)) install.packages("roxygen2")
roxygen2::roxygenise(roclets = c("namespace", "rd"))  # only NAMESPACE/Rd
